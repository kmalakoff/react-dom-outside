{"version":3,"sources":["ActiveBoundary.tsx"],"sourcesContent":["import React from 'react';\n\nimport { useEvent } from 'react-dom-event';\nimport { BoundaryProvider, useBoundary, useRef } from 'react-ref-boundary';\n\n// @ts-ignore\nimport ActiveBase from './lib/ActiveBase.tsx';\n\nfunction ActiveComponent({ isActive, setIsActive, children, ...rest }) {\n  const ref = useRef<HTMLElement>(null);\n  const boundary = useBoundary();\n\n  useEvent(\n    (event) => {\n      if (!isActive) return;\n      for (let i = 0; i < boundary.refs.length; i++) {\n        const x = boundary.refs[i] as React.RefObject<HTMLElement>;\n        if (x.current && x.current.contains(event.target)) return;\n      }\n      setIsActive(false);\n    },\n    [isActive, setIsActive],\n  );\n\n  return (\n    <ActiveBase\n      isActive={isActive}\n      setIsActive={setIsActive}\n      ref={ref}\n      {...rest}\n    >\n      {children}\n    </ActiveBase>\n  );\n}\n\nexport default function ActiveBoundaryNative({ children, ...rest }) {\n  const state = React.useState<boolean>(false);\n  const isActive = state[0];\n  const setIsActive = state[1];\n  const Component = isActive ? ActiveComponent : ActiveBase;\n  return (\n    <BoundaryProvider>\n      <Component {...rest} isActive={isActive} setIsActive={setIsActive}>\n        {React.Children.map<React.ReactNode, React.ReactNode>(\n          children,\n          (child) =>\n            React.isValidElement(child)\n              ? React.cloneElement(child, { isActive, setIsActive })\n              : child,\n        )}\n      </Component>\n    </BoundaryProvider>\n  );\n}\n"],"names":["ActiveBoundaryNative","children","rest","state","React","useState","isActive","setIsActive","Component","ActiveComponent","ActiveBase","BoundaryProvider","Children","map","child","isValidElement","cloneElement","ref","useRef","boundary","useBoundary","useEvent","event","i","refs","length","x","current","contains","target"],"mappings":"AAAA;;;;kBAoCwBA,oBAAoB;AApC1B,IAAA,MAAO,kCAAP,OAAO,EAAA;AAEA,IAAA,cAAiB,WAAjB,iBAAiB,CAAA;AACY,IAAA,iBAAoB,WAApB,oBAAoB,CAAA;AAGnD,IAAA,cAAsB,kCAAtB,sBAAsB,EAAA;AA8B9B,SAASA,oBAAoB,CAAC,MAAqB,EAAE;QAArBC,QAAQ,GAAV,MAAqB,CAAnBA,QAAQ,EAAKC,IAAI,4BAAnB,MAAqB;QAAnBD,UAAQ;;IACrD,IAAME,KAAK,GAAGC,MAAK,QAAA,CAACC,QAAQ,CAAU,KAAK,CAAC,AAAC;IAC7C,IAAMC,QAAQ,GAAGH,KAAK,CAAC,CAAC,CAAC,AAAC;IAC1B,IAAMI,WAAW,GAAGJ,KAAK,CAAC,CAAC,CAAC,AAAC;IAC7B,IAAMK,SAAS,GAAGF,QAAQ,GAAGG,eAAe,GAAGC,cAAU,QAAA,AAAC;IAC1D,qBACE,6BAACC,iBAAgB,iBAAA,sBACf,6BAACH,SAAS,eAAKN,IAAI;QAAEI,QAAQ,EAAEA,QAAQ;QAAEC,WAAW,EAAEA,WAAW;QAC9DH,MAAK,QAAA,CAACQ,QAAQ,CAACC,GAAG,CACjBZ,QAAQ,EACR,SAACa,KAAK;6BACJV,MAAK,QAAA,CAACW,cAAc,CAACD,KAAK,CAAC,iBACvBV,MAAK,QAAA,CAACY,YAAY,CAACF,KAAK,EAAE;YAAER,QAAQ,EAARA,QAAQ;YAAEC,WAAW,EAAXA,WAAW;SAAE,CAAC,GACpDO,KAAK;KAAA,CACZ,CACS,CACK,CACnB;CACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA9CD,SAASL,eAAe,CAAC,MAA4C,EAAE;QAA5CH,QAAQ,GAAV,MAA4C,CAA1CA,QAAQ,EAAEC,WAAW,GAAvB,MAA4C,CAAhCA,WAAW,EAAEN,QAAQ,GAAjC,MAA4C,CAAnBA,QAAQ,EAAKC,IAAI,4BAA1C,MAA4C;QAA1CI,UAAQ;QAAEC,aAAW;QAAEN,UAAQ;;IACxD,IAAMgB,GAAG,GAAGC,CAAAA,GAAAA,iBAAM,AAAmB,CAAA,OAAnB,CAAc,IAAI,CAAC,AAAC;IACtC,IAAMC,QAAQ,GAAGC,CAAAA,GAAAA,iBAAW,AAAE,CAAA,YAAF,EAAE,AAAC;IAE/BC,CAAAA,GAAAA,cAAQ,AAUP,CAAA,SAVO,CACN,SAACC,KAAK,EAAK;QACT,IAAI,CAAChB,QAAQ,EAAE,OAAO;QACtB,IAAK,IAAIiB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,QAAQ,CAACK,IAAI,CAACC,MAAM,EAAEF,CAAC,EAAE,CAAE;YAC7C,IAAMG,CAAC,GAAGP,QAAQ,CAACK,IAAI,CAACD,CAAC,CAAC,AAAgC,AAAC;YAC3D,IAAIG,CAAC,CAACC,OAAO,IAAID,CAAC,CAACC,OAAO,CAACC,QAAQ,CAACN,KAAK,CAACO,MAAM,CAAC,EAAE,OAAO;SAC3D;QACDtB,WAAW,CAAC,KAAK,CAAC,CAAC;KACpB,EACD;QAACD,QAAQ;QAAEC,WAAW;KAAC,CACxB,CAAC;IAEF,qBACE,6BAACG,cAAU,QAAA;QACTJ,QAAQ,EAAEA,QAAQ;QAClBC,WAAW,EAAEA,WAAW;QACxBU,GAAG,EAAEA,GAAG;OACJf,IAAI,GAEPD,QAAQ,CACE,CACb;CACH"}