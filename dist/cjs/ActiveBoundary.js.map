{"version":3,"sources":["ActiveBoundary.tsx"],"sourcesContent":["import React from 'react';\n\nimport { useEvent } from 'react-dom-event';\nimport { BoundaryProvider, useBoundary, useRef } from 'react-ref-boundary';\n\n// @ts-ignore\nimport ActiveBase from './lib/ActiveBase.tsx';\n\nfunction ActiveComponent({ isActive, setIsActive, children, ...rest }) {\n  const ref = useRef<HTMLElement>(null);\n  const boundary = useBoundary();\n\n  useEvent(\n    (event) => {\n      if (isActive && !boundary.refs.some((x: React.RefObject<HTMLElement>) => x.current && x.current.contains(event.target))) setIsActive(false);\n    },\n    [isActive, setIsActive]\n  );\n\n  return (\n    <ActiveBase isActive={isActive} setIsActive={setIsActive} ref={ref} {...rest}>\n      {children}\n    </ActiveBase>\n  );\n}\n\nexport default function ActiveBoundaryNative({ children, ...rest }) {\n  const [isActive, setIsActive] = React.useState(false);\n  const Component = isActive ? ActiveComponent : ActiveBase;\n  return (\n    <BoundaryProvider>\n      <Component {...rest} isActive={isActive} setIsActive={setIsActive}>\n      {React.Children.map<React.ReactNode, React.ReactNode>(children, (child) => (React.isValidElement(child) ? React.cloneElement(child, { isActive, setIsActive }) : child))}\n      </Component>\n    </BoundaryProvider>\n  );\n}\n"],"names":["ActiveBoundaryNative","children","rest","React","useState","isActive","setIsActive","Component","ActiveComponent","ActiveBase","BoundaryProvider","Children","map","child","isValidElement","cloneElement","ref","useRef","boundary","useBoundary","useEvent","event","refs","some","x","current","contains","target"],"mappings":"AAAA;;;;kBA0BwBA,oBAAoB;AA1B1B,IAAA,MAAO,kCAAP,OAAO,EAAA;AAEA,IAAA,cAAiB,WAAjB,iBAAiB,CAAA;AACY,IAAA,iBAAoB,WAApB,oBAAoB,CAAA;AAGnD,IAAA,cAAsB,kCAAtB,sBAAsB,EAAA;AAoB9B,SAASA,oBAAoB,CAAC,MAAqB,EAAE;QAArBC,QAAQ,GAAV,MAAqB,CAAnBA,QAAQ,EAAKC,IAAI,4BAAnB,MAAqB;QAAnBD,UAAQ;;IACrD,IAAgCE,GAAqB,kBAArBA,MAAK,QAAA,CAACC,QAAQ,CAAC,KAAK,CAAC,IAAA,EAA9CC,QAAQ,GAAiBF,GAAqB,GAAtC,EAAEG,WAAW,GAAIH,GAAqB,GAAzB,AAA0B;IACtD,IAAMI,SAAS,GAAGF,QAAQ,GAAGG,eAAe,GAAGC,cAAU,QAAA,AAAC;IAC1D,qBACE,6BAACC,iBAAgB,iBAAA,sBACf,6BAACH,SAAS,eAAKL,IAAI;QAAEG,QAAQ,EAAEA,QAAQ;QAAEC,WAAW,EAAEA,WAAW;QAChEH,MAAK,QAAA,CAACQ,QAAQ,CAACC,GAAG,CAAmCX,QAAQ,EAAE,SAACY,KAAK;6BAAMV,MAAK,QAAA,CAACW,cAAc,CAACD,KAAK,CAAC,iBAAGV,MAAK,QAAA,CAACY,YAAY,CAACF,KAAK,EAAE;YAAER,QAAQ,EAARA,QAAQ;YAAEC,WAAW,EAAXA,WAAW;SAAE,CAAC,GAAGO,KAAK;KAAC,CAAC,CAC5J,CACK,CACnB;CACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA5BD,SAASL,eAAe,CAAC,MAA4C,EAAE;QAA5CH,QAAQ,GAAV,MAA4C,CAA1CA,QAAQ,EAAEC,WAAW,GAAvB,MAA4C,CAAhCA,WAAW,EAAEL,QAAQ,GAAjC,MAA4C,CAAnBA,QAAQ,EAAKC,IAAI,4BAA1C,MAA4C;QAA1CG,UAAQ;QAAEC,aAAW;QAAEL,UAAQ;;IACxD,IAAMe,GAAG,GAAGC,CAAAA,GAAAA,iBAAM,AAAmB,CAAA,OAAnB,CAAc,IAAI,CAAC,AAAC;IACtC,IAAMC,QAAQ,GAAGC,CAAAA,GAAAA,iBAAW,AAAE,CAAA,YAAF,EAAE,AAAC;IAE/BC,CAAAA,GAAAA,cAAQ,AAKP,CAAA,SALO,CACN,SAACC,KAAK,EAAK;QACT,IAAIhB,QAAQ,IAAI,CAACa,QAAQ,CAACI,IAAI,CAACC,IAAI,CAAC,SAACC,CAA+B;mBAAKA,CAAC,CAACC,OAAO,IAAID,CAAC,CAACC,OAAO,CAACC,QAAQ,CAACL,KAAK,CAACM,MAAM,CAAC;SAAA,CAAC,EAAErB,WAAW,CAAC,KAAK,CAAC,CAAC;KAC7I,EACD;QAACD,QAAQ;QAAEC,WAAW;KAAC,CACxB,CAAC;IAEF,qBACE,6BAACG,cAAU,QAAA;QAACJ,QAAQ,EAAEA,QAAQ;QAAEC,WAAW,EAAEA,WAAW;QAAEU,GAAG,EAAEA,GAAG;OAAMd,IAAI,GACzED,QAAQ,CACE,CACb;CACH"}