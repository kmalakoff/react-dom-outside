{"version":3,"sources":["Active.tsx"],"sourcesContent":["import React from 'react';\n\nimport { useEvent } from 'react-dom-event';\n\n// @ts-ignore\nimport ActiveBase from './lib/ActiveBase.tsx';\n\nfunction ActiveComponent({ isActive, setIsActive, children, ...rest }) {\n  const ref = React.useRef<HTMLElement>(null);\n\n  useEvent(\n    (event) => {\n      if (!isActive) return;\n      if (ref.current && ref.current.contains(event.target)) return;\n      setIsActive(false);\n    },\n    [isActive, setIsActive],\n  );\n\n  return (\n    <ActiveBase\n      isActive={isActive}\n      setIsActive={setIsActive}\n      ref={ref}\n      {...rest}\n    >\n      {children}\n    </ActiveBase>\n  );\n}\n\nexport default function Active({ children, ...rest }) {\n  const state = React.useState<boolean>(false);\n  const isActive = state[0];\n  const setIsActive = state[1];\n  const Component = isActive ? ActiveComponent : ActiveBase;\n  return (\n    <Component {...rest} isActive={isActive} setIsActive={setIsActive}>\n      {React.Children.map<React.ReactNode, React.ReactNode>(children, (child) =>\n        React.isValidElement(child)\n          ? React.cloneElement(child, { isActive, setIsActive })\n          : child,\n      )}\n    </Component>\n  );\n}\n"],"names":["Active","children","rest","state","React","useState","isActive","setIsActive","Component","ActiveComponent","ActiveBase","Children","map","child","isValidElement","cloneElement","ref","useRef","useEvent","event","current","contains","target"],"mappings":"AAAA;;;;kBA+BwBA,MAAM;AA/BZ,IAAA,MAAO,kCAAP,OAAO,EAAA;AAEA,IAAA,cAAiB,WAAjB,iBAAiB,CAAA;AAGnB,IAAA,cAAsB,kCAAtB,sBAAsB,EAAA;AA0B9B,SAASA,MAAM,CAAC,MAAqB,EAAE;QAArBC,QAAQ,GAAV,MAAqB,CAAnBA,QAAQ,EAAKC,IAAI,4BAAnB,MAAqB;QAAnBD,UAAQ;;IACvC,IAAME,KAAK,GAAGC,MAAK,QAAA,CAACC,QAAQ,CAAU,KAAK,CAAC,AAAC;IAC7C,IAAMC,QAAQ,GAAGH,KAAK,CAAC,CAAC,CAAC,AAAC;IAC1B,IAAMI,WAAW,GAAGJ,KAAK,CAAC,CAAC,CAAC,AAAC;IAC7B,IAAMK,SAAS,GAAGF,QAAQ,GAAGG,eAAe,GAAGC,cAAU,QAAA,AAAC;IAC1D,qBACE,6BAACF,SAAS,eAAKN,IAAI;QAAEI,QAAQ,EAAEA,QAAQ;QAAEC,WAAW,EAAEA,WAAW;QAC9DH,MAAK,QAAA,CAACO,QAAQ,CAACC,GAAG,CAAmCX,QAAQ,EAAE,SAACY,KAAK;6BACpET,MAAK,QAAA,CAACU,cAAc,CAACD,KAAK,CAAC,iBACvBT,MAAK,QAAA,CAACW,YAAY,CAACF,KAAK,EAAE;YAAEP,QAAQ,EAARA,QAAQ;YAAEC,WAAW,EAAXA,WAAW;SAAE,CAAC,GACpDM,KAAK;KAAA,CACV,CACS,CACZ;CACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAtCD,SAASJ,eAAe,CAAC,MAA4C,EAAE;QAA5CH,QAAQ,GAAV,MAA4C,CAA1CA,QAAQ,EAAEC,WAAW,GAAvB,MAA4C,CAAhCA,WAAW,EAAEN,QAAQ,GAAjC,MAA4C,CAAnBA,QAAQ,EAAKC,IAAI,4BAA1C,MAA4C;QAA1CI,UAAQ;QAAEC,aAAW;QAAEN,UAAQ;;IACxD,IAAMe,GAAG,GAAGZ,MAAK,QAAA,CAACa,MAAM,CAAc,IAAI,CAAC,AAAC;IAE5CC,CAAAA,GAAAA,cAAQ,AAOP,CAAA,SAPO,CACN,SAACC,KAAK,EAAK;QACT,IAAI,CAACb,QAAQ,EAAE,OAAO;QACtB,IAAIU,GAAG,CAACI,OAAO,IAAIJ,GAAG,CAACI,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,EAAE,OAAO;QAC9Df,WAAW,CAAC,KAAK,CAAC,CAAC;KACpB,EACD;QAACD,QAAQ;QAAEC,WAAW;KAAC,CACxB,CAAC;IAEF,qBACE,6BAACG,cAAU,QAAA;QACTJ,QAAQ,EAAEA,QAAQ;QAClBC,WAAW,EAAEA,WAAW;QACxBS,GAAG,EAAEA,GAAG;OACJd,IAAI,GAEPD,QAAQ,CACE,CACb;CACH"}