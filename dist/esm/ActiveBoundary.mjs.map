{"version":3,"sources":["ActiveBoundary.tsx"],"sourcesContent":["import React from 'react';\n\nimport { useEvent } from 'react-dom-event';\nimport { BoundaryProvider, useBoundary, useRef } from 'react-ref-boundary';\n\n// @ts-ignore\nimport ActiveBase from './lib/ActiveBase.tsx';\n\nfunction ActiveComponent({ isActive, setIsActive, children, ...rest }) {\n  const ref = useRef<HTMLElement>(null);\n  const boundary = useBoundary();\n\n  useEvent(\n    (event) => {\n      if (isActive && !boundary.refs.some((x: React.RefObject<HTMLElement>) => x.current && x.current.contains(event.target))) setIsActive(false);\n    },\n    [isActive, setIsActive]\n  );\n\n  return (\n    <ActiveBase isActive={isActive} setIsActive={setIsActive} ref={ref} {...rest}>\n      {children}\n    </ActiveBase>\n  );\n}\n\nexport default function ActiveBoundaryNative({ children, ...rest }) {\n  const [isActive, setIsActive] = React.useState(false);\n  const Component = isActive ? ActiveComponent : ActiveBase;\n  return (\n    <BoundaryProvider>\n      <Component {...rest} isActive={isActive} setIsActive={setIsActive}>\n      {React.Children.map<React.ReactNode, React.ReactNode>(children, (child) => (React.isValidElement(child) ? React.cloneElement(child, { isActive, setIsActive }) : child))}\n      </Component>\n    </BoundaryProvider>\n  );\n}\n"],"names":["React","useEvent","BoundaryProvider","useBoundary","useRef","ActiveBase","ActiveComponent","isActive","setIsActive","children","rest","ref","boundary","event","refs","some","x","current","contains","target","ActiveBoundaryNative","useState","Component","Children","map","child","isValidElement","cloneElement"],"mappings":"AAAA;;;;;;;;;;;;;;AAAA,OAAOA,KAAK,MAAM,OAAO,CAAC;AAE1B,SAASC,QAAQ,QAAQ,iBAAiB,CAAC;AAC3C,SAASC,gBAAgB,EAAEC,WAAW,EAAEC,MAAM,QAAQ,oBAAoB,CAAC;AAE3E,aAAa;AACb,OAAOC,UAAU,MAAM,sBAAsB,CAAC;AAE9C,SAASC,eAAe,CAAC,EAAEC,QAAQ,CAAA,EAAEC,WAAW,CAAA,EAAEC,QAAQ,CAAA,EAAE,GAAGC,IAAI,EAAE,EAAE;IACrE,MAAMC,GAAG,GAAGP,MAAM,CAAc,IAAI,CAAC,AAAC;IACtC,MAAMQ,QAAQ,GAAGT,WAAW,EAAE,AAAC;IAE/BF,QAAQ,CACN,CAACY,KAAK,GAAK;QACT,IAAIN,QAAQ,IAAI,CAACK,QAAQ,CAACE,IAAI,CAACC,IAAI,CAAC,CAACC,CAA+B,GAAKA,CAAC,CAACC,OAAO,IAAID,CAAC,CAACC,OAAO,CAACC,QAAQ,CAACL,KAAK,CAACM,MAAM,CAAC,CAAC,EAAEX,WAAW,CAAC,KAAK,CAAC,CAAC;KAC7I,EACD;QAACD,QAAQ;QAAEC,WAAW;KAAC,CACxB,CAAC;IAEF,qBACE,oBAACH,UAAU;QAACE,QAAQ,EAAEA,QAAQ;QAAEC,WAAW,EAAEA,WAAW;QAAEG,GAAG,EAAEA,GAAG;OAAMD,IAAI,GACzED,QAAQ,CACE,CACb;CACH;AAED,eAAe,SAASW,oBAAoB,CAAC,EAAEX,QAAQ,CAAA,EAAE,GAAGC,IAAI,EAAE,EAAE;IAClE,MAAM,CAACH,QAAQ,EAAEC,WAAW,CAAC,GAAGR,KAAK,CAACqB,QAAQ,CAAC,KAAK,CAAC,AAAC;IACtD,MAAMC,SAAS,GAAGf,QAAQ,GAAGD,eAAe,GAAGD,UAAU,AAAC;IAC1D,qBACE,oBAACH,gBAAgB,sBACf,oBAACoB,SAAS,eAAKZ,IAAI;QAAEH,QAAQ,EAAEA,QAAQ;QAAEC,WAAW,EAAEA,WAAW;QAChER,KAAK,CAACuB,QAAQ,CAACC,GAAG,CAAmCf,QAAQ,EAAE,CAACgB,KAAK,iBAAMzB,KAAK,CAAC0B,cAAc,CAACD,KAAK,CAAC,iBAAGzB,KAAK,CAAC2B,YAAY,CAACF,KAAK,EAAE;YAAElB,QAAQ;YAAEC,WAAW;SAAE,CAAC,GAAGiB,KAAK,AAAC,CAAC,CAC5J,CACK,CACnB;CACH,CAAA"}