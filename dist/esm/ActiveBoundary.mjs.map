{"version":3,"sources":["ActiveBoundary.tsx"],"sourcesContent":["import React from 'react';\nimport { useEvent } from 'react-dom-event';\nimport { BoundaryProvider, useBoundary, useRef } from 'react-ref-boundary';\n\nfunction Component({ children, isActive, setIsActive }) {\n  const ref = useRef<HTMLElement>(null);\n  const boundary = useBoundary();\n  useEvent(\n    (event) => {\n      if (!isActive) return;\n      for (let i = 0; i < boundary.refs.length; i++) {\n        const x = boundary.refs[i] as React.RefObject<HTMLElement>;\n        if (x.current && x.current.contains(event.target)) return;\n      }\n      setIsActive(false);\n    },\n    [isActive, setIsActive],\n  );\n\n  return (\n    <React.Fragment>\n      {React.Children.map<React.ReactNode, React.ReactNode>(children, (child) =>\n        React.isValidElement(child)\n          ? React.cloneElement(child, { isActive, setIsActive, ref })\n          : child,\n      )}\n    </React.Fragment>\n  );\n}\n\nexport default function ActiveBoundary({ children }) {\n  const state = React.useState<boolean>(false);\n  const isActive = state[0];\n  const setIsActive = state[1];\n\n  return (\n    <BoundaryProvider>\n      <Component isActive={isActive} setIsActive={setIsActive}>\n        {children}\n      </Component>\n    </BoundaryProvider>\n  );\n}\n"],"names":["React","useEvent","BoundaryProvider","useBoundary","useRef","Component","children","isActive","setIsActive","ref","boundary","event","i","refs","length","x","current","contains","target","Fragment","Children","map","child","isValidElement","cloneElement","ActiveBoundary","state","useState"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO,CAAC;AAC1B,SAASC,QAAQ,QAAQ,iBAAiB,CAAC;AAC3C,SAASC,gBAAgB,EAAEC,WAAW,EAAEC,MAAM,QAAQ,oBAAoB,CAAC;AAE3E,SAASC,SAAS,CAAC,EAAEC,QAAQ,CAAA,EAAEC,QAAQ,CAAA,EAAEC,WAAW,CAAA,EAAE,EAAE;IACtD,MAAMC,GAAG,GAAGL,MAAM,CAAc,IAAI,CAAC,AAAC;IACtC,MAAMM,QAAQ,GAAGP,WAAW,EAAE,AAAC;IAC/BF,QAAQ,CACN,CAACU,KAAK,GAAK;QACT,IAAI,CAACJ,QAAQ,EAAE,OAAO;QACtB,IAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,QAAQ,CAACG,IAAI,CAACC,MAAM,EAAEF,CAAC,EAAE,CAAE;YAC7C,MAAMG,CAAC,GAAGL,QAAQ,CAACG,IAAI,CAACD,CAAC,CAAC,AAAgC,AAAC;YAC3D,IAAIG,CAAC,CAACC,OAAO,IAAID,CAAC,CAACC,OAAO,CAACC,QAAQ,CAACN,KAAK,CAACO,MAAM,CAAC,EAAE,OAAO;SAC3D;QACDV,WAAW,CAAC,KAAK,CAAC,CAAC;KACpB,EACD;QAACD,QAAQ;QAAEC,WAAW;KAAC,CACxB,CAAC;IAEF,qBACE,oBAACR,KAAK,CAACmB,QAAQ,QACZnB,KAAK,CAACoB,QAAQ,CAACC,GAAG,CAAmCf,QAAQ,EAAE,CAACgB,KAAK,iBACpEtB,KAAK,CAACuB,cAAc,CAACD,KAAK,CAAC,iBACvBtB,KAAK,CAACwB,YAAY,CAACF,KAAK,EAAE;YAAEf,QAAQ;YAAEC,WAAW;YAAEC,GAAG;SAAE,CAAC,GACzDa,KAAK,CACV,CACc,CACjB;CACH;AAED,eAAe,SAASG,cAAc,CAAC,EAAEnB,QAAQ,CAAA,EAAE,EAAE;IACnD,MAAMoB,KAAK,GAAG1B,KAAK,CAAC2B,QAAQ,CAAU,KAAK,CAAC,AAAC;IAC7C,MAAMpB,QAAQ,GAAGmB,KAAK,CAAC,CAAC,CAAC,AAAC;IAC1B,MAAMlB,WAAW,GAAGkB,KAAK,CAAC,CAAC,CAAC,AAAC;IAE7B,qBACE,oBAACxB,gBAAgB,sBACf,oBAACG,SAAS;QAACE,QAAQ,EAAEA,QAAQ;QAAEC,WAAW,EAAEA,WAAW;OACpDF,QAAQ,CACC,CACK,CACnB;CACH,CAAA"}