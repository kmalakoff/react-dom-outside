{"version":3,"file":"react-dom-outside.js","sources":["../../src/lib/ActiveBase.tsx","../../src/ActiveBoundary.tsx","../../src/Active.tsx"],"sourcesContent":["import React from 'react';\n\ntype ActiveBaseProps = {\n  isActive: boolean;\n  setIsActive: React.Dispatch<React.SetStateAction<boolean>>;\n  children?: React.ReactNode;\n  style?: object;\n};\n\nconst ActiveBase = React.forwardRef(\n  (\n    { isActive, setIsActive, children, style, ...rest }: ActiveBaseProps,\n    ref: React.Ref<HTMLDivElement>,\n  ) => {\n    return (\n      <div\n        {...rest}\n        ref={ref}\n        style={{ flex: 1, ...(style || {}) }}\n        onClick={(event) => {\n          event.stopPropagation();\n          setIsActive(!isActive);\n        }}\n      >\n        {children}\n      </div>\n    );\n  },\n);\nexport default ActiveBase;\n","import React from 'react';\n\nimport { useEvent } from 'react-dom-event';\nimport { BoundaryProvider, useBoundary, useRef } from 'react-ref-boundary';\n\n// @ts-ignore\nimport ActiveBase from './lib/ActiveBase.tsx';\n\nfunction ActiveComponent({ isActive, setIsActive, children, ...rest }) {\n  const ref = useRef<HTMLElement>(null);\n  const boundary = useBoundary();\n\n  useEvent(\n    (event) => {\n      if (!isActive) return;\n      for (let i = 0; i < boundary.refs.length; i++) {\n        const x = boundary.refs[i] as React.RefObject<HTMLElement>;\n        if (x.current && x.current.contains(event.target)) return;\n      }\n      setIsActive(false);\n    },\n    [isActive, setIsActive],\n  );\n\n  return (\n    <ActiveBase\n      isActive={isActive}\n      setIsActive={setIsActive}\n      ref={ref}\n      {...rest}\n    >\n      {children}\n    </ActiveBase>\n  );\n}\n\nexport default function ActiveBoundaryNative({ children, ...rest }) {\n  const state = React.useState<boolean>(false);\n  const isActive = state[0];\n  const setIsActive = state[1];\n  const Component = isActive ? ActiveComponent : ActiveBase;\n  return (\n    <BoundaryProvider>\n      <Component {...rest} isActive={isActive} setIsActive={setIsActive}>\n        {React.Children.map<React.ReactNode, React.ReactNode>(\n          children,\n          (child) =>\n            React.isValidElement(child)\n              ? React.cloneElement(child, { isActive, setIsActive })\n              : child,\n        )}\n      </Component>\n    </BoundaryProvider>\n  );\n}\n","import React from 'react';\n\nimport { useEvent } from 'react-dom-event';\n\n// @ts-ignore\nimport ActiveBase from './lib/ActiveBase.tsx';\n\nfunction ActiveComponent({ isActive, setIsActive, children, ...rest }) {\n  const ref = React.useRef<HTMLElement>(null);\n\n  useEvent(\n    (event) => {\n      if (!isActive) return;\n      if (ref.current && ref.current.contains(event.target)) return;\n      setIsActive(false);\n    },\n    [isActive, setIsActive],\n  );\n\n  return (\n    <ActiveBase\n      isActive={isActive}\n      setIsActive={setIsActive}\n      ref={ref}\n      {...rest}\n    >\n      {children}\n    </ActiveBase>\n  );\n}\n\nexport default function Active({ children, ...rest }) {\n  const state = React.useState<boolean>(false);\n  const isActive = state[0];\n  const setIsActive = state[1];\n  const Component = isActive ? ActiveComponent : ActiveBase;\n  return (\n    <Component {...rest} isActive={isActive} setIsActive={setIsActive}>\n      {React.Children.map<React.ReactNode, React.ReactNode>(children, (child) =>\n        React.isValidElement(child)\n          ? React.cloneElement(child, { isActive, setIsActive })\n          : child,\n      )}\n    </Component>\n  );\n}\n"],"names":["ActiveBase","React","forwardRef","ref","isActive","setIsActive","children","style","rest","_objectWithoutProperties","div","_extends","flex","onClick","event","stopPropagation","ActiveComponent","useRef","boundary","useBoundary","useEvent","i","refs","length","x","current","contains","target","ActiveBoundaryNative","state","useState","Component","BoundaryProvider","Children","map","child","isValidElement","cloneElement","Active"],"mappings":"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"}