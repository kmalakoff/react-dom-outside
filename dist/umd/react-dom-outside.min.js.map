{"version":3,"file":"react-dom-outside.min.js","sources":["../../src/ActiveBoundary.ts","../../src/Active.ts"],"sourcesContent":["import { useState, Fragment, Children, isValidElement, cloneElement, createElement } from 'react';\nimport type { RefObject, ReactElement, FC, Dispatch, ReactNode } from 'react';\nimport { useEvent } from 'react-dom-event';\nimport { BoundaryProvider, useBoundary, useRef } from 'react-ref-boundary';\n\nfunction Component({ children, isActive, setIsActive }) {\n  const ref = useRef<HTMLElement>(null);\n  const boundary = useBoundary();\n  useEvent(\n    (event) => {\n      if (!isActive) return;\n      for (let i = 0; i < boundary.refs.length; i++) {\n        const x = boundary.refs[i] as RefObject<HTMLElement>;\n        if (x.current && x.current.contains(event.target)) return;\n      }\n      setIsActive(false);\n    },\n    [isActive, setIsActive]\n  );\n\n  return createElement(\n    Fragment,\n    null,\n    Children.map<ReactNode, ReactNode>(children, (child) =>\n      isValidElement(child)\n        ? cloneElement(child as ReactElement<any>, {\n            isActive,\n            setIsActive,\n            ref,\n          })\n        : child\n    )\n  );\n}\n\ninterface ComponentProps {\n  isActive: boolean;\n  setIsActive: Dispatch<boolean>;\n}\n\nexport default function ActiveBoundary({ children }) {\n  const state = useState<boolean>(false);\n  const isActive = state[0];\n  const setIsActive = state[1];\n\n  return createElement(BoundaryProvider, null, createElement<ComponentProps>(Component as FC, { isActive, setIsActive }, children));\n}\n","import { useState, useRef, Fragment, Children, isValidElement, cloneElement, createElement } from 'react';\nimport type { ReactNode, ReactElement } from 'react';\nimport { useEvent } from 'react-dom-event';\n\nexport default function Active({ children }) {\n  const state = useState<boolean>(false);\n  const isActive = state[0];\n  const setIsActive = state[1];\n  const ref = useRef<HTMLElement>(null);\n  useEvent(\n    (event) => {\n      if (!isActive) return;\n      if (ref.current && ref.current.contains(event.target)) return;\n      setIsActive(false);\n    },\n    [isActive, setIsActive]\n  );\n\n  return createElement(\n    Fragment,\n    null,\n    Children.map<ReactNode, ReactNode>(children, (child) =>\n      isValidElement(child)\n        ? cloneElement(child as ReactElement<any>, {\n            isActive,\n            setIsActive,\n            ref,\n          })\n        : child\n    )\n  );\n}\n"],"names":["Component","param","children","isActive","setIsActive","ref","useRef","boundary","useBoundary","useEvent","event","i","refs","length","x","current","contains","target","createElement","Fragment","Children","map","child","isValidElement","cloneElement","state","useState","BoundaryProvider"],"mappings":"iaAKA,SAASA,EAAUC,GAAEC,IAAAA,EAAFD,EAAEC,SAAUC,EAAZF,EAAYE,SAAUC,EAAtBH,EAAsBG,YACjCC,EAAMC,SAAoB,MAC1BC,EAAWC,EAAAA,cAajB,OAZAC,EAAQA,UACN,SAACC,GACC,GAAKP,EAAL,CACA,IAAK,IAAIQ,EAAI,EAAGA,EAAIJ,EAASK,KAAKC,OAAQF,IAAK,CAC7C,IAAMG,EAAIP,EAASK,KAAKD,GACxB,GAAIG,EAAEC,SAAWD,EAAEC,QAAQC,SAASN,EAAMO,QAAS,MACpD,CACDb,GAAY,EALU,IAOxB,CAACD,EAAUC,IAGNc,EAAAA,cACLC,EAAAA,SACA,KACAC,EAAQA,SAACC,IAA0BnB,GAAU,SAACoB,GAC5CC,OAAAA,iBAAeD,GACXE,EAAAA,aAAaF,EAA4B,CACvCnB,SAAAA,EACAC,YAAAA,EACAC,IAAAA,IAEFiB,CAAK,IAGd,UC7Bc,SAAgBrB,GAAA,IAAEC,EAAFD,EAAEC,SACzBuB,EAAQC,YAAkB,GAC1BvB,EAAWsB,EAAM,GACjBrB,EAAcqB,EAAM,GACpBpB,EAAMC,SAAoB,MAUhC,OATAG,EAAQA,UACN,SAACC,GACMP,IACDE,EAAIU,SAAWV,EAAIU,QAAQC,SAASN,EAAMO,SAC9Cb,GAAY,MAEd,CAACD,EAAUC,IAGNc,EAAAA,cACLC,EAAAA,SACA,KACAC,EAAQA,SAACC,IAA0BnB,GAAU,SAACoB,GAC5CC,OAAAA,iBAAeD,GACXE,EAAAA,aAAaF,EAA4B,CACvCnB,SAAAA,EACAC,YAAAA,EACAC,IAAAA,IAEFiB,CAAK,uBDYA,SAAwBrB,GAAA,IAAEC,EAAFD,EAAEC,SACjCuB,EAAQC,YAAkB,GAC1BvB,EAAWsB,EAAM,GACjBrB,EAAcqB,EAAM,GAE1B,OAAOP,EAAaA,cAACS,EAAgBA,iBAAE,KAAMT,EAAAA,cAA8BlB,EAAiB,CAAEG,SAAAA,EAAUC,YAAAA,GAAeF"}